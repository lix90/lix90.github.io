<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!--Description-->
  

  <!--Author-->
  
  <meta name="author" content="Xiang Li">
  

  <!--Open Graph Title-->
  
      <meta property="og:title" content="每日总结 2016-10-29"/>
  
  <!--Open Graph Description-->
  
  <!--Open Graph Site Name-->
  <meta property="og:site_name" content="Lix!"/>
  <!--Type page-->
  
      <meta property="og:type" content="article" />
  
  <!--Page Cover-->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- Title -->
  
  <title>每日总结 2016-10-29 - Lix!</title>


  <link rel="shortcut icon" href="/images/logo.png">

  <!-- Custom CSS/Sass -->
  <link rel="stylesheet" href="/css/style.css">

  <!----------------------------
  https://github.com/GallenHu/hexo-theme-Daily

 _____            _   _
|  __ \          (_) | |
| |  | |   __ _   _  | |  _   _
| |  | |  / _` | | | | | | | | |
| |__| | | (_| | | | | | | |_| |
|_____/   \__,_| |_| |_|  \__, |
                          __/ |
                         |___/

    --------------------------->

</head>


<body>

  <!-- Nav -->
  <header class="site-header">
  <div class="header-inside">
    <div class="logo">
      <a class="logo" href="/" rel="home">
        
        
          <img src="/images/lix-logo.svg" alt="Lix!" height="60">
        
      </a>
    </div>
    <!-- Navigation -->
    <nav class="navbar">
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse">
        <ul class="navbar-nav">
          
          
            <li>
              <a href="/.">
                
                  Home
                
              </a>
            </li>
          
            <li>
              <a href="/archives">
                
                  Archive
                
              </a>
            </li>
          
            <li>
              <a href="/about">
                
                  About
                
              </a>
            </li>
          
            <li>
              <a href="/atom.xml">
                
                  RSS
                
              </a>
            </li>
          
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </nav>
    <div class="button-wrap">
      <button class="menu-toggle">Primary Menu</button>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="content-area">
  <div class="post">
    <!-- Post Content -->
    <div class="container">
      <article>
        <!-- Title date & tags -->
        <div class="post-header">
          <h1 class="entry-title">
            每日总结 2016-10-29
            
          </h1>
          <p class="posted-on">
          2016-10-29
          </p>
          <div class="tags-links">
            
              
                <a href="/tags/hexo/" rel="tag">
                  hexo
                </a>
              
                <a href="/tags/Grunt/" rel="tag">
                  Grunt
                </a>
              
                <a href="/tags/Gulp/" rel="tag">
                  Gulp
                </a>
              
                <a href="/tags/Jade/" rel="tag">
                  Jade
                </a>
              
                <a href="/tags/Pugjs/" rel="tag">
                  Pugjs
                </a>
              
            
          </div>
        </div>
        <!-- Post Main Content -->
        <div class="toc-container" id="sidebar">
          <h3 class="toc-heading">Contents</h3>
          <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#HEXO"><span class="post-toc-text">HEXO</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Grunt"><span class="post-toc-text">Grunt</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#构建自动化"><span class="post-toc-text">构建自动化</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#使用-Grunt"><span class="post-toc-text">使用 Grunt</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Gruntfile-js-配置文件"><span class="post-toc-text">Gruntfile.js 配置文件</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Gulp"><span class="post-toc-text">Gulp</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#EJS"><span class="post-toc-text">EJS</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#JADE"><span class="post-toc-text">JADE</span></a></li></ol>
        </div>
        <div class="entry-content">
          <p>今天修改了下博客模板，顺便了解了下相关的工具和模块。</p>
<h1 id="HEXO"><a href="#HEXO" class="headerlink" title="HEXO"></a>HEXO</h1><p>辅助函数</p>
<p><code>url_for()</code> 在路径前加根目录 <code>&lt;% url_for(path) %&gt;</code><br><code>relative_url(from, to)</code> 获得一个从 <code>from</code> 到 <code>to</code> 的路径<br><code>css(path, ...)</code> 载入 css 文件<br><code>js(path, ...)</code> 载入 js 文件<br><code>link_to(path, [text], [options])</code> 插入链接<br><code>mail_to(path, [text], [options])</code> 插入电子邮件<br><code>image_tag(path, [options])</code> 插入图片<br><code>favicon_tag(path)</code> 插入 favicon<br><code>feed_tag(path, [options])</code> 插入 feed 链接<br><code>is_*()</code> 系列条件函数，<code>current</code> <code>home</code> <code>post</code> <code>archive</code> <code>year</code> <code>month</code> <code>category</code> <code>tag</code></p>
<p><code>partial(layout, [locals], [options])</code> 载入其他模板文件，您可在 locals 设定区域变量。<br><code>paginator(options)</code> 插入分页链接<br><code>toc(str, [options])</code></p>
<p><code>__(&#39;next&#39;)</code> 多语言支持时，<code>__()</code> 用于转换语言。</p>
<blockquote>
<p>在模板中，透过 __ 或 _p 辅助函数，即可取得翻译后的字符串，前者用于一般使用；而后者用于复数字符串。</p>
</blockquote>
<h1 id="Grunt"><a href="#Grunt" class="headerlink" title="Grunt"></a><a href="http://www.gruntjs.net/" target="_blank" rel="external">Grunt</a></h1><h2 id="构建自动化"><a href="#构建自动化" class="headerlink" title="构建自动化"></a>构建自动化</h2><p>谈 Grunt，就要谈到“构建自动化”。</p>
<blockquote>
<p><strong>Build automation</strong> is the process of automating the creation of a software build and the associated processes including: compiling computer source code into binary code, packaging binary code, and running automated tests.</p>
</blockquote>
<p>构建自动化有以下一些好处：</p>
<blockquote>
<ul>
<li>A necessary pre-condition for continuous integration and continuous testing 在连续集成和测试中的必要的前置条件</li>
<li>Improve product quality 改善产品质量</li>
<li>Accelerate the compile and link processing 加速编译和链接处理</li>
<li>Eliminate redundant tasks 去除冗余的任务</li>
<li>Minimize “bad builds” 减少低质量的构建</li>
<li>Eliminate dependencies on key personnel 去除关键的人员依赖</li>
<li>Have history of builds and releases in order to investigate issues 具有可供查询的构建和发布历史</li>
<li>Save time and money - because of the reasons listed above 节省时间和财力</li>
</ul>
</blockquote>
<h2 id="使用-Grunt"><a href="#使用-Grunt" class="headerlink" title="使用 Grunt"></a>使用 Grunt</h2><p>使用 Grunt 可以加快开发和自动构建。可以帮助开发者将压缩、编译、单元测试、代码检查等工作自动化。</p>
<p>三步使用 grunt：</p>
<blockquote>
<ul>
<li>Change to the project’s root directory.</li>
<li>Install project dependencies with npm install.</li>
<li>Run Grunt with grunt.</li>
</ul>
</blockquote>
<p><code>package.json</code> 保存项目元数据；<br><code>Gruntfile.js</code> 配置或定义任务、加载 Grunt 插件。<br><code>npm install &lt;module&gt; --save-dev</code> 本地安装并将依赖写入 <code>package.json</code> 中 <code>devDependencies</code>。</p>
<h2 id="Gruntfile-js-配置文件"><a href="#Gruntfile-js-配置文件" class="headerlink" title="Gruntfile.js 配置文件"></a><code>Gruntfile.js</code> 配置文件</h2><p>Gruntfile.js 包括下面四个部分：</p>
<blockquote>
<ul>
<li>The “wrapper” function</li>
<li>Project and task configuration</li>
<li>Loading Grunt plugins and tasks</li>
<li>Custom tasks</li>
</ul>
</blockquote>
<p>包装函数（wrapper function）：概括 grunt 的配置信息。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">grunt</span>) </span>&#123;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>在包装函数内，初始化配置对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">grunt.initConfig(&#123;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>将 <code>package.json</code> 的项目设置保存到 <code>pkg</code> 属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pkg: grunt.file.readJSON(<span class="string">'package.json'</span>)</div></pre></td></tr></table></figure>
<p>插件配置（grunt-contrib-concat 为例）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">concat: &#123;</div><div class="line">    options: &#123;</div><div class="line">        seperator: <span class="string">';'</span></div><div class="line">    &#125;,</div><div class="line">    dist: &#123;</div><div class="line">    src: [],</div><div class="line">    dest: <span class="string">''</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>加载用到的插件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">grunt.loadNpmTasks(<span class="string">'grunt-contrib-concat'</span>);</div></pre></td></tr></table></figure>
<p>创建任务：</p>
<p>直接输入 <code>grunt</code> 执行默认任务（default）；<br>输入 <code>grunt test</code> 可以执行自定义的任务。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'concat'</span>]);</div><div class="line">grunt.registerTask(<span class="string">'test'</span>, [<span class="string">'jshint'</span>]);</div></pre></td></tr></table></figure>
<p>Grunt 常见插件：</p>
<p><code>grunt-contrib-uglify</code> 压缩 js, css 文件<br><code>grunt-contrib-concat</code> 连接文件<br><code>grunt-contrib-jshint</code> js 代码检测<br><code>grunt-contrib-watch</code> 代码监视</p>
<h1 id="Gulp"><a href="#Gulp" class="headerlink" title="Gulp"></a><a href="http://www.gulpjs.com.cn/" target="_blank" rel="external">Gulp</a></h1><p>Gulp 和 Grunt 干差不多的活，目前还不知道优劣。Gulp 显得简单一些。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'default'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// 将你的默认的任务代码放在这</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h1 id="EJS"><a href="#EJS" class="headerlink" title="EJS"></a>EJS</h1><blockquote>
<p>EJS 是一个简单的模板语言，可以让你使用原生 JavaScript 生成 HTML 标记。没有关于如何组织内容的语法规则，也没有循环和控制流的重载，只是使用原生的 JavaScript。</p>
</blockquote>
<p>EJS 一个在 HTML 中嵌入原生 JS 语言的模板语言。</p>
<p>有以下特点：</p>
<blockquote>
<p>快速的编写和解析<br>简单的模板标签: &lt;% %&gt;<br>自定义分隔符（例如使用 &lt;? ?&gt;替换&lt;% %&gt;）<br>使用 include 引入其他模板<br>同时支持服务器端和客户端使用<br>JavaScript 的静态缓存<br>模板的静态缓存<br>与 Express 视图系统兼容</p>
</blockquote>
<p>一个简单的例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ejs = <span class="built_in">require</span>(<span class="string">'ejs'</span>), <span class="comment">// 加载 ejs 模块</span></div><div class="line">    people = [<span class="string">'geddy'</span>, <span class="string">'neil'</span>, <span class="string">'alex'</span>], <span class="comment">// 数据</span></div><div class="line">    html = ejs.render(<span class="string">'&lt;%= people.join(", "); %&gt;'</span>, &#123;people: people&#125;); <span class="comment">// ejs 渲染</span></div></pre></td></tr></table></figure>
<p>熟悉这几个标签：</p>
<ul>
<li><code>&lt;%</code> ‘Scriptlet’ 标签, 用于控制流，没有输出</li>
<li><code>&lt;%=</code> 向模板输出值（带有转义）</li>
<li><code>&lt;%-</code> 向模板输出没有转义的值</li>
<li><code>&lt;%#</code> 注释标签，不执行，也没有输出</li>
<li><code>&lt;%%</code> 输出字面的 ‘&lt;%’</li>
<li><code>%&gt;</code> 普通的结束标签</li>
<li><code>-%&gt;</code> Trim-mode (‘newline slurp’) 标签, 移除随后的换行符</li>
</ul>
<p>使用 <code>include</code> 调用的模板时路径需要 filename 选项。</p>
<h1 id="JADE"><a href="#JADE" class="headerlink" title="JADE"></a>JADE</h1><p>JADE（现在改名为 Pugjs） 是一个极度注重代码简洁性的模板语言。相比 EJS 来说，渲染性能较低一些。但因为其简单的语法（对其他人来说也许算是“复杂”了）受到欢迎。</p>
<p>下面记录一些容易忘记的特殊语法：</p>
<p><code>= &#39;\n&#39;</code> 换行<br><code>!=</code> 不转义的属性</p>
<blockquote>
<p>未经转义的缓存代码十分危险。您必须正确处理和过滤用户的输入来避免跨站脚本攻击。</p>
</blockquote>
<p><code>&#39;${}&#39;</code> 字符串中嵌入变量</p>
<p><code>&amp;attributes({&#39;data-foo&#39;: &#39;bar&#39;})</code> 语法可以将一个对象转化为一个元素的属性列表</p>
<p>分支条件（Case）：case 是 JavaScript 的 switch 指令的缩写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">- var foo = 10</div><div class="line">case foo</div><div class="line">    when 0</div><div class="line">        p eee</div><div class="line">    when 1</div><div class="line">        p fff</div><div class="line">    default</div><div class="line">        p ggg #&#123;foo&#125;</div></pre></td></tr></table></figure>
<p>分支传递 (Case Fall Through) :在 Pug 中，传递会在遇到非空的语法块前一直进行下去。如果不想输出任何东西的话，可以明确地加上一个原生的 break 语句。也可以使用块展开的语法</p>
<p>由 <code>-</code> 开始的一段为不输出的代码。另起一行并缩进可以写成块的形式。<br>用 <code>=</code> 开始一段带有输出的代码，它应该是可以被求值的一个 JavaScript 表达式。<br>用 <code>!=</code> 开始一段不转义的，带有输出的代码。</p>
<p>用 <code>//-</code> 进行单行注释，使用 <code>//</code> 并另起一行缩进，可进行块注释。pug 的条件注释跟 html 一样，并没有特殊的写法。</p>
<p>条件判断形式可以省略开头的 <code>-</code>, <code>if !x</code> === <code>unless x</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if x</div><div class="line">else if y</div><div class="line">else</div><div class="line">    z</div></pre></td></tr></table></figure>
<p>模板继承：<code>extends</code> 关键字允许模板去扩展一个布局或父模板，这样它就可以覆盖某些预定义的内容。</p>
<p>包含 <code>include</code> 功能允许您把另外的文件内容插入进来。</p>
<p>Pug 支持使用 <code>block</code> 和 <code>extends</code> 关键字进行模板的继承。一个称之为“块”（block）的代码块，可以被子模板覆盖、替换。这个过程是递归的。</p>
<p>Pug 允许您去替换（默认的行为）、<code>prepend</code>（向头部添加内容），或者 <code>append</code>（向尾部添加内容）一个块。当使用 <code>block append</code> 或者 <code>block prepend</code> 时，<code>block</code> 关键字是可省略的</p>
<p>嵌入 Interpolation：Pug 提供了好几种方式满足不同的嵌入需求。</p>
<p>迭代 Iteration</p>
<p><code>each</code> <code>each ... in ...</code> <code>each val, index in arr</code></p>
<p><code>for</code> <code>while</code> 也可以创建迭代</p>
<p>混入 Mixin：混入是一种允许您在 Pug 中重复使用一整个代码块的方法。<code>mixin</code> 可以写成函数形式，传入参数。在使用 <code>mixin</code> 的函数形式时，在前面加上 <code>+</code> 号，即 <code>+foo(faz)</code>。还可以使用剩余参数（rest arguments）<code>...</code> 语法来表示参数列表传入若干长度不定的参数。</p>
<p>放置纯文本</p>
<ul>
<li>管道文本：在每行加一个 <code>|</code> 字符。</li>
<li>标签的行内：文本只需要和标签名隔开一个空格。</li>
<li>标签中的块：在标签后街上一个 <code>.</code> 点号（没有空格）。</li>
</ul>

        </div>
      </article>
    </div>
    <!-- Pre or Next -->
    <div class="nav-links">
      
        <div class="nav-previous">
          <a href="/2016/10/30/daily/" rel="prev"><span class="meta-arraw meta-arraw-left"></span> 上一页</a>
        </div>
      
      
        <div class="nav-next">
          <a href="/2016/10/28/daily/" rel="prev">下一页 <span class="meta-arraw meta-arraw-right"></span></a>
        </div>
      
    </div>
    <!-- Comments -->
    <div class="container">
      
    </div>

  </div>
</div>


  <!-- Footer -->
  <!-- Footer-widgets -->
<div class="footer-widgets">
  <div class="row inside-wrapper">
    <div class="col-1-3">
      <aside>
        <h1 class="widget-title">关于本站</h1>
        <div class="custom-widget-content">
          
          一些菜鸟笔记，原创不多
        </div>
      </aside>
    </div>
    <div class="col-1-3">
      <aside>
        <h1 class="widget-title">与我联系</h1>
        <div class="widget-text">
          
            
              <a href="https://github.com/lix90" class="icon icon-github" target="_blank">github</a>
            
              <a href="mailto:xiangli90@outlook.com" class="icon icon-mail" target="_blank">mail</a>
            
              <a href="https://twitter.com/alexiangli" class="icon icon-twitter" target="_blank">twitter</a>
            
          
        </div>
      </aside>
    </div>
    <div class="col-1-3">
      <aside>
        <h1 class="widget-title">站内搜索</h1>
        <div class="widget-text">
          <form onSubmit="return appDaily.submitSearch('')">
            <p>
              <input type="text" placeholder="search..." id="homeSearchInput">
            </p>
            <!-- <input type="submit" value="GO"> -->
          </form>
        </div>
      </aside>
    </div>
  </div>
</div>
<!-- Footer -->
<footer class="site-info">
  <p>
    <span>Lix! &copy; 2016</span>
    
      <span class="split">|</span><span>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> with Theme <a href="https://github.com/GallenHu/hexo-theme-Daily" target="_blank">Daily</a></span>
    
  </p>
</footer>


  <!-- After footer scripts -->
  <!-- scripts -->
<script src="//cdn.bootcss.com/zepto/1.2.0/zepto.min.js"></script>
<script src="/js/app.js"></script>
<script src="/js/theme.js"></script>



</body>

</html>
